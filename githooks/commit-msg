#!/usr/bin/env bash
set -euo pipefail
repo_root=$(git rev-parse --show-toplevel)
python_bin="$repo_root/.venv/bin/python"
if [[ ! -x "$python_bin" ]]; then
  python_bin=$(command -v python || command -v python3 || true)
fi
if [[ -z "$python_bin" ]]; then
  echo "error: python interpreter not found. Activate .venv or install python." >&2
  exit 1
fi
"$python_bin" "$repo_root/devtools/check_commit_message.py" "$1"
